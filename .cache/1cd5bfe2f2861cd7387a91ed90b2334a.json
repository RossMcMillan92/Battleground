{"dependencies":[{"name":"./health.js","loc":{"line":3,"column":23}},{"name":"./collisions","loc":{"line":4,"column":55}},{"name":"./movable","loc":{"line":11,"column":7}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Player = undefined;\n\nvar _health = require(\"./health.js\");\n\nvar _collisions = require(\"./collisions\");\n\nvar _movable = require(\"./movable\");\n\nconst Player = constraints => {\n  let health = (0, _health.Health)();\n\n  const dimensions = {\n    width: 80,\n    height: 80\n  };\n\n  let pos = {\n    x: constraints[0] / 2,\n    y: constraints[1] / 2\n  };\n  let acceleration = {\n    x: 0,\n    y: 0\n  };\n  const velocityMap = {\n    default: 5,\n    running: 7\n  };\n  const accelStep = .025;\n  const decelStep = .05;\n\n  let damagePower = 25;\n  let isRepelling = false;\n\n  const updatePosition = input => {\n    const velocity = (0, _movable.calculateVelocity)(velocityMap, input);\n    let newAcceleration = (0, _movable.calculateInputAcceleration)(acceleration, accelStep, decelStep, input);\n    let newPos;\n\n    newAcceleration = (0, _movable.calculateInputDeceleration)(newAcceleration, decelStep, input);\n    newAcceleration = (0, _movable.calculateCollisionAcceleration)(newAcceleration, getPos(), constraints, isRepelling);\n    newPos = (0, _movable.calculatePos)(pos, newAcceleration, velocity);\n\n    // MUTATIONS\n    pos = newPos;\n    acceleration = newAcceleration;\n    isRepelling = false;\n  };\n\n  const repel = data => {\n    isRepelling = data;\n  };\n\n  const getDamagePower = () => damagePower;\n\n  const detectCollision = item => (0, _collisions.detectCollision)(getBoundingBox())(item);\n\n  const render = ctx => {\n    renderSelf(ctx);\n    health.renderHealthBar(ctx, getPos());\n  };\n\n  const renderSelf = ctx => {\n    ctx.beginPath();\n    ctx.fillStyle = '#222';\n    ctx.rect(pos.x, pos.y, dimensions.width, dimensions.height);\n    ctx.fill();\n  };\n\n  const getBoundingBox = () => [pos.x, pos.x + dimensions.width, pos.y, pos.y + dimensions.height];\n\n  const getPos = () => Object.assign({}, pos, dimensions);\n\n  const output = {\n    updatePosition,\n    getBoundingBox,\n    getDamagePower,\n    detectCollision,\n    getPos,\n    repel,\n    render\n  };\n\n  return Object.assign({}, output, health);\n};\n\nexports.Player = Player;"},"hash":"28e113ac34c6babedd212902d6fb662d"}